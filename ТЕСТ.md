# üß™ –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º

### 1. Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose ps
# –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å Up
```

### 2. API Rapira
```bash
curl -s "http://localhost:8000/api/test/rapira-base-rate?symbol=USDT/RUB" | jq '.'
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "best_ask": 81.81,
  "best_bid": 81.78
}
```

### 3. –ì–æ—Ä–æ–¥–∞ –≤ –ë–î
```bash
docker-compose exec postgres psql -U exchange -d exchange \
  -c "SELECT percent, description FROM fx_markup_rule WHERE description ILIKE '%–≥–æ—Ä–æ–¥%' ORDER BY percent;"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å 7 –≥–æ—Ä–æ–¥–æ–≤ (0%, 0.3%, 0.7%, 0.8%, 0.9%, 1%, 1.5%)**

## ü§ñ –¢–µ—Å—Ç –≤ Telegram –±–æ—Ç–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–æ–≤
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç
2. –ù–∞–∂–º–∏—Ç–µ "üí± –ö—É—Ä—Å—ã"
3. ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è 7 –∫–Ω–æ–ø–æ–∫ —Å –≥–æ—Ä–æ–¥–∞–º–∏
4. –í—ã–±–µ—Ä–∏—Ç–µ "üè≠ –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É"
5. ‚úÖ –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   USDT/RUB:
     –ü–æ–∫—É–ø–∫–∞: 82.63 ‚ÇΩ
     –ù–∞—Ü–µ–Ω–∫–∞ –≥–æ—Ä–æ–¥–∞: +1%
```

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
```
1. –ù–∞–∂–º–∏—Ç–µ "‚úâÔ∏è –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É"
2. ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ –≥–æ—Ä–æ–¥–æ–≤
3. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥
4. –í—ã–±–µ—Ä–∏—Ç–µ USDT/RUB
5. ‚úÖ –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –∫—É—Ä—Å:
   üí∞ –í–∞—à –∫—É—Ä—Å: 82.63 ‚ÇΩ
   ‚îî –ë–∞–∑–æ–≤—ã–π: 81.81 ‚ÇΩ
   ‚îî –ù–∞—Ü–µ–Ω–∫–∞: +1%
   ‚îî –ò—Å—Ç–æ—á–Ω–∏–∫: RAPIRA
```

## üåê –¢–µ—Å—Ç Web Admin

### –¢–µ—Å—Ç 1: City Rates
```
1. http://localhost:8000/admin/city-rates
2. ‚úÖ –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
3. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Å 7 –≥–æ—Ä–æ–¥–∞–º–∏
4. ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∫—É—Ä—Å–∞–º–∏
5. ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å Rapira (81.81 / 81.78)
```

### –¢–µ—Å—Ç 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Ü–µ–Ω–∫–∏
```
1. –ù–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å" —É –†–æ—Å—Ç–æ–≤–∞
2. –í–≤–µ–¥–∏—Ç–µ 1.2 (–≤–º–µ—Å—Ç–æ 1.0)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. ‚úÖ –ö—É—Ä—Å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è: 82.79 ‚ÇΩ (–±—ã–ª–æ 82.63 ‚ÇΩ)
```

### –¢–µ—Å—Ç 3: –î–∞—à–±–æ—Ä–¥
```
1. http://localhost:8000/admin
2. ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ó–∞—è–≤–∫–∏, Live —á–∞—Ç—ã, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - Grinex, FX System, Markup Rules, –ö—É—Ä—Å—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º
```

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs webadmin | tail -20

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl "http://localhost:8000/api/test/rapira-base-rate?symbol=USDT/RUB"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ FSM –æ–±–Ω–æ–≤–ª–µ–Ω
docker-compose logs bot | grep -i "ChooseCity"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart bot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫—É—Ä—Å
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Ü–µ–Ω–∫–∏
docker-compose exec postgres psql -U exchange -d exchange \
  -c "SELECT percent FROM fx_markup_rule WHERE description ILIKE '%rostov%';"

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 1.0000
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Rapira API
```
best_ask: ~81-82 ‚ÇΩ (–ø–æ–∫—É–ø–∫–∞)
best_bid: ~81-82 ‚ÇΩ (–ø—Ä–æ–¥–∞–∂–∞)
–†–∞–∑–Ω–∏—Ü–∞ (—Å–ø—Ä–µ–¥): ~0.03-0.1 ‚ÇΩ
```

### –ö—É—Ä—Å—ã –¥–ª—è –†–æ—Å—Ç–æ–≤–∞ (+1%)
```
–ü–æ–∫—É–ø–∫–∞: ~82.6 ‚ÇΩ
–ü—Ä–æ–¥–∞–∂–∞: ~82.5 ‚ÇΩ
```

### –ö—É—Ä—Å—ã –¥–ª—è –ú–æ—Å–∫–≤—ã (0%)
```
–ü–æ–∫—É–ø–∫–∞: ~81.8 ‚ÇΩ (–±–∞–∑–æ–≤—ã–π)
–ü—Ä–æ–¥–∞–∂–∞: ~81.8 ‚ÇΩ (–±–∞–∑–æ–≤—ã–π)
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [x] Rapira API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [x] –ì–æ—Ä–æ–¥–∞ –≤ –ë–î —Å–æ–∑–¥–∞–Ω—ã
- [x] Web Admin –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [x] City Rates —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] API endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ Telegram –±–æ—Ç–µ
- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å –≥–æ—Ä–æ–¥–æ–º

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ flow —Å –≤—ã–±–æ—Ä–æ–º –≥–æ—Ä–æ–¥–∞
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É** —Å —Ä–∞–∑–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∫—É** - –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Ü–µ–Ω–∫—É –≥–æ—Ä–æ–¥–∞
4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–∞—è–≤–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≥–æ—Ä–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω

---

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!** ‚úÖüöÄ

