# Quick Test - –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚úÖ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç!

```bash
Docker Containers:
‚úÖ postgres  - Up 10 hours (port 5432)
‚úÖ redis     - Up 10 hours (port 6379)
‚úÖ bot       - Up 4 minutes
‚úÖ webadmin  - Up 4 minutes (port 8000)
```

## üß™ –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –∫—É—Ä—Å–∞ Rapira

```bash
curl -s "https://api.rapira.net/market/exchange-plate-mini?symbol=USDT/RUB" | jq '.ask.lowestPrice'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
81.83000000
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î - –ø—Ä–∞–≤–∏–ª–∞ –≥–æ—Ä–æ–¥–æ–≤

```bash
docker-compose exec postgres psql -U exchange -d exchange \
  -c "SELECT percent, description FROM fx_markup_rule WHERE description ILIKE '%–≥–æ—Ä–æ–¥%' ORDER BY percent;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ú–æ—Å–∫–≤–∞:            0.0%
–°–ü–±:               0.3%
–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥:      0.7%
–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥:   0.8%
–ö–∞–∑–∞–Ω—å:            0.9%
–†–æ—Å—Ç–æ–≤:            1.0%
–î—Ä—É–≥–∏–µ –≥–æ—Ä–æ–¥–∞:     1.5%
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Web Admin

```bash
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ç—Ä–µ–±—É–µ—Ç login)
curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/admin
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 302 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ login)

# Login —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/login
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 200 (OK)

# City rates (—Ç—Ä–µ–±—É–µ—Ç login)
curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/admin/city-rates
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 302 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ login)
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```bash
docker-compose logs bot | grep "FX"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
INFO:src.services.fx_scheduler:Starting FX rates scheduler...
INFO:src.services.fx_scheduler:FX rates scheduler started successfully
INFO:src.services.fx_rates:Cache refreshed: 2 sources, 4 pairs, 8 rules
```

## üåê –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
```
http://localhost:8000/admin/city-rates
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –¥–∞—à–±–æ—Ä–¥
```
1. http://localhost:8000/admin
2. –õ–æ–≥–∏–Ω (–∏–∑ .env: ADMIN_LOGIN/ADMIN_PASSWORD)
3. –ö–∞—Ä—Ç–æ—á–∫–∞ "üìç –ö—É—Ä—Å—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º" (–∑–µ–ª–µ–Ω–∞—è)
```

## üí° –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

### –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/city-rates`:

**1. –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ü–µ–Ω–æ–∫:**
```
–ì–æ—Ä–æ–¥             | –ù–∞—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å  | –î–µ–π—Å—Ç–≤–∏—è
–ú–æ—Å–∫–≤–∞           | 0%      | –ê–∫—Ç–∏–≤–Ω–æ | [–ò–∑–º–µ–Ω–∏—Ç—å]
–°–ü–±              | +0.3%   | –ê–∫—Ç–∏–≤–Ω–æ | [–ò–∑–º–µ–Ω–∏—Ç—å]
–†–æ—Å—Ç–æ–≤           | +1%     | –ê–∫—Ç–∏–≤–Ω–æ | [–ò–∑–º–µ–Ω–∏—Ç—å]
–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥  | +0.8%   | –ê–∫—Ç–∏–≤–Ω–æ | [–ò–∑–º–µ–Ω–∏—Ç—å]
...
```

**2. –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∫—É—Ä—Å–∞–º–∏ (–ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üó∫ –ú–æ—Å–∫–≤–∞        ‚îÇ  ‚îÇ üó∫ –†–æ—Å—Ç–æ–≤        ‚îÇ  ‚îÇ üó∫ –ù.–ù–æ–≤–≥–æ—Ä–æ–¥   ‚îÇ
‚îÇ Ã∂8Ã∂1Ã∂.Ã∂8Ã∂3Ã∂ (base)    ‚îÇ  ‚îÇ Ã∂8Ã∂1Ã∂.Ã∂8Ã∂3Ã∂ (base)    ‚îÇ  ‚îÇ Ã∂8Ã∂1Ã∂.Ã∂8Ã∂3Ã∂ (base)    ‚îÇ
‚îÇ 81.83 ‚ÇΩ         ‚îÇ  ‚îÇ 82.65 ‚ÇΩ         ‚îÇ  ‚îÇ 82.48 ‚ÇΩ         ‚îÇ
‚îÇ [0%]            ‚îÇ  ‚îÇ [+1%]           ‚îÇ  ‚îÇ [+0.8%]         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**3. –ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å Rapira:**
```
Best Ask (–ø–æ–∫—É–ø–∫–∞): 81.83 ‚ÇΩ
Best Bid (–ø—Ä–æ–¥–∞–∂–∞): 81.50 ‚ÇΩ
–°–ø—Ä–µ–¥: 0.40%
```

## üéØ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ

### 1. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Ü–µ–Ω–∫—É

```
1. –ù–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å" –Ω–∞–ø—Ä–æ—Ç–∏–≤ –†–æ—Å—Ç–æ–≤–∞
2. –í–≤–µ–¥–∏—Ç–µ: 1.2 (–≤–º–µ—Å—Ç–æ 1.0)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. –ö—É—Ä—Å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è: 81.83 √ó 1.012 = 82.81 ‚ÇΩ
```

### 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –ø–∞—Ä—É

```
1. –í —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –≤—ã–±–µ—Ä–∏—Ç–µ "BTC/USDT"
2. –ö—É—Ä—Å—ã –æ–±–Ω–æ–≤—è—Ç—Å—è –¥–ª—è –±–∏—Ç–∫–æ–∏–Ω–∞
3. –ù–∞—Ü–µ–Ω–∫–∏ —Ç–µ –∂–µ, –Ω–æ —Ü–µ–Ω—ã –¥—Ä—É–≥–∏–µ
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–æ—Ç–µ

```
/admin
‚Üí "üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
‚Üí "üü¢ Grinex Exchange"
‚Üí –ö–Ω–æ–ø–∫–∞ "üìä –ö—É—Ä—Å—ã"
```

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs webadmin

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart webadmin
```

### –ù–µ—Ç –∫—É—Ä—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω—ã
docker-compose exec postgres psql -U exchange -d exchange \
  -c "SELECT COUNT(*) FROM fx_markup_rule WHERE description ILIKE '%–≥–æ—Ä–æ–¥%';"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 7

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API Rapira –Ω–∞–ø—Ä—è–º—É—é
curl "https://api.rapira.net/market/exchange-plate-mini?symbol=USDT/RUB"
```

### –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
```
F12 ‚Üí Console ‚Üí –°–º–æ—Ç—Ä–∏–º –æ—à–∏–±–∫–∏
–í–æ–∑–º–æ–∂–Ω–æ CORS –∏–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps
# –í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å Up

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
docker-compose exec postgres psql -U exchange -d exchange -c "\dt fx_*"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 7 —Ç–∞–±–ª–∏—Ü fx_*

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª
docker-compose exec postgres psql -U exchange -d exchange \
  -c "SELECT COUNT(*) FROM fx_markup_rule;"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 8

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs --tail=50 bot webadmin
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–û—Ç–∫—Ä–æ–π—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
```
http://localhost:8000/admin/city-rates
```

–õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏–∑ .env —Ñ–∞–π–ª–∞.

---

**–í–æ–ø—Ä–æ—Å—ã? –°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
- `CITY_RATES_README.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `CITY_RATES_QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `DEPLOYMENT_COMPLETE.md` - –°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

